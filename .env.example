# =============================================================================
# TEI NLP Converter - Environment Configuration Template
# =============================================================================
# Copy this file to .env and customize for your environment
# cp .env.example .env
# =============================================================================

# Application
APP_NAME="TEI NLP Converter"
VERSION="3.0.0"
ENVIRONMENT=production  # development, testing, production
DEBUG=false

# Server
HOST=0.0.0.0
PORT=8080
WORKERS=4

# =============================================================================
# SECURITY (REQUIRED FOR PRODUCTION)
# =============================================================================
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=CHANGE_THIS_TO_SECURE_RANDOM_KEY_MIN_32_CHARS

# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=CHANGE_THIS_TO_FERNET_KEY

# Session secret (generate same as SECRET_KEY)
SESSION_SECRET=CHANGE_THIS_TO_SESSION_SECRET

# API Authentication (MUST be true for production)
REQUIRE_AUTH=false
API_KEY=

# CSRF Protection
ENABLE_CSRF=true
CSRF_TOKEN_EXPIRY=3600

# =============================================================================
# DATABASE (REQUIRED)
# =============================================================================
# Production (PostgreSQL) - RECOMMENDED:
# DATABASE_URL=postgresql://user:password@localhost:5432/tei_nlp

# Development (SQLite):
DATABASE_URL=sqlite:///data/tei_nlp.db

# Connection Pool Settings
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=40
DATABASE_POOL_RECYCLE=3600

# =============================================================================
# CACHE (Redis)
# =============================================================================
# Production (Redis server):
# REDIS_URL=redis://localhost:6379/0

# Development (no Redis - memory-only cache):
REDIS_URL=

CACHE_TTL=3600
MAX_CACHE_SIZE=10000
CACHE_WARMUP_ON_STARTUP=true

# =============================================================================
# NLP CONFIGURATION
# =============================================================================
# Provider: spacy or remote
# NOTE: Google Cloud NLP has been DEPRECATED and REMOVED
#       Use local domain-specific NER models instead
NLP_PROVIDER=spacy
NLP_FALLBACK_PROVIDERS=["spacy"]

# SpaCy model (auto-downloads if not present)
# Options: en_core_web_sm (12MB), en_core_web_md (40MB), en_core_web_lg (741MB)
SPACY_MODEL=en_core_web_sm
ENABLE_GPU=false
BATCH_SIZE=32

# Remote NLP Server (if using remote provider)
NLP_SERVER_URL=http://localhost:8081
NLP_SERVER_TIMEOUT=30
NLP_SERVER_API_KEY=
USE_REMOTE_NLP=false

# Circuit breaker for NLP services
NLP_CIRCUIT_BREAKER_THRESHOLD=5
NLP_CIRCUIT_BREAKER_TIMEOUT=60

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_USER=200
MAX_TEXT_LENGTH=100000

# =============================================================================
# LOGGING
# =============================================================================
LOG_LEVEL=INFO
LOG_FILE_MAX_BYTES=10485760  # 10MB
LOG_FILE_BACKUP_COUNT=10
AUDIT_LOG_FILE=logs/audit.log

# =============================================================================
# BACKGROUND TASKS
# =============================================================================
ENABLE_BACKGROUND_TASKS=true
LARGE_TEXT_THRESHOLD=5000
MAX_CONCURRENT_TASKS=10
TASK_RETENTION_DAYS=7
TASK_RECOVERY_ON_STARTUP=true

# =============================================================================
# DATA RETENTION
# =============================================================================
DATA_RETENTION_DAYS=90
CLEANUP_INTERVAL_HOURS=24

# =============================================================================
# MONITORING
# =============================================================================
ENABLE_METRICS=true
METRICS_PORT=9090
ENABLE_REQUEST_ID=true
ENABLE_AUDIT_LOG=true

# =============================================================================
# CORS (Cross-Origin Resource Sharing)
# =============================================================================
# Production: Set to your actual domain
CORS_ORIGINS=["http://localhost:3000"]

# =============================================================================
# ALLOWED HOSTS (Trusted Host Validation)
# =============================================================================
# List of allowed host headers for production security
# This prevents "Invalid host header" errors when accessing via proxy/domain
# Use "*" to allow all hosts (NOT RECOMMENDED for production)
# Use ".example.com" to allow all subdomains of example.com
# Examples:
#   ALLOWED_HOSTS=["localhost", "127.0.0.1", "tei-nlp.example.com"]
#   ALLOWED_HOSTS=["localhost", ".yourdomain.com"]
# Default includes proxlab.keenetic.pro for production deployment:
ALLOWED_HOSTS=["localhost", "127.0.0.1", "tei-nlp.proxlab.keenetic.pro", ".proxlab.keenetic.pro"]

# =============================================================================
# SESSION
# =============================================================================
SESSION_EXPIRE_MINUTES=60

# =============================================================================
# PERFORMANCE
# =============================================================================
MAX_MEMORY_MB=1024
REQUEST_TIMEOUT=300

# =============================================================================
# DEPRECATED CONFIGURATION (DO NOT USE)
# =============================================================================
# Google Cloud NLP has been removed in favor of local domain-specific models
# These settings are NO LONGER SUPPORTED:
# GOOGLE_PROJECT_ID=
# GOOGLE_CREDENTIALS_PATH=
# GOOGLE_API_KEY=
